<!-- visualize.html -->
{% extends 'base.html' %}
{% block content %}

<!-- Section: Visualization Page -->
<div class="container">
  <h1 class="title">ðŸ“Š Data Visualization</h1>
  <div class="chart-container">
    <canvas id="priceDistributionChart"></canvas>
  </div>
  <div class="chart-container">
    <canvas id="correlationChart"></canvas>
  </div>
</div>

<!-- CDN Links -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

<script>
  // GSAP animations
  gsap.from(".title", {
    opacity: 0,
    y: -50,
    duration: 1,
    ease: "power3.out"
  });

  gsap.utils.toArray(".chart-container").forEach((chart, index) => {
    gsap.from(chart, {
      scrollTrigger: {
        trigger: chart,
        start: "top 80%",
        toggleActions: "play none none reset"
      },
      opacity: 0,
      y: 100,
      duration: 1 + index * 0.2,
      ease: "expo.out"
    });
  });

  // Chart.js - Price Distribution
  const ctx1 = document.getElementById('priceDistributionChart').getContext('2d');
  new Chart(ctx1, {
    type: 'bar',
    data: {
      labels: ['100k', '200k', '300k', '400k', '500k', '600k', '700k'],
      datasets: [{
        label: 'No. of Houses',
        data: [12, 19, 25, 30, 24, 15, 10],
        backgroundColor: '#41729f',
        borderRadius: 10
      }]
    },
    options: {
      responsive: true,
      plugins: {
        title: {
          display: true,
          text: 'Price Distribution of Houses',
          color: '#fff',
          font: {
            size: 18
          }
        },
        legend: {
          labels: {
            color: '#fff'
          }
        }
      },
      scales: {
        x: {
          ticks: { color: '#fff' },
          grid: { color: '#333' }
        },
        y: {
          ticks: { color: '#fff' },
          grid: { color: '#333' }
        }
      }
    }
  });

  // Chart.js - Feature Correlation (example)
  const ctx2 = document.getElementById('correlationChart').getContext('2d');
  new Chart(ctx2, {
    type: 'line',
    data: {
      labels: ['Income', 'Age', 'Rooms', 'Bedrooms', 'Population'],
      datasets: [{
        label: 'Correlation with Price',
        data: [0.64, 0.33, 0.71, 0.29, 0.45],
        backgroundColor: 'rgba(91, 192, 222, 0.2)',
        borderColor: '#c3e0e5',
        tension: 0.4,
        pointBackgroundColor: '#5885af',
        pointRadius: 6
      }]
    },
    options: {
      responsive: true,
      plugins: {
        title: {
          display: true,
          text: 'Feature Correlation with Price',
          color: '#fff',
          font: {
            size: 18
          }
        },
        legend: {
          labels: {
            color: '#fff'
          }
        }
      },
      scales: {
        x: {
          ticks: { color: '#fff' },
          grid: { color: '#333' }
        },
        y: {
          ticks: { color: '#fff' },
          grid: { color: '#333' }
        }
      }
    }
  });
</script>

<style>
  body {
    background: #0a0a00;
    font-family: 'Segoe UI', sans-serif;
    color: #ebe8e0;
    margin: 0;
    padding: 0;
  }
  .container {
    padding: 4rem 2rem;
    text-align: center;
  }
  .title {
    font-size: 2.5rem;
    margin-bottom: 3rem;
    color: #d01110;
  }
  .chart-container {
    margin: 2rem auto;
    max-width: 800px;
    background: #111;
    padding: 2rem;
    border-radius: 1rem;
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.05);
  }
</style>

{% endblock %}
